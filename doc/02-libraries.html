<!DOCTYPE html>
<html class="no-js" lang="ja">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Composer ドキュメント日本語訳</title>
        <meta name="description" content="PHPの依存管理ツール">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link rel="stylesheet" href="/getcomposer.org_doc_jp/css/styles.min.css">
        <link rel="shortcut icon" href="/getcomposer.org_doc_jp/favicon.ico">
        <script src="/getcomposer.org_doc_jp/js/scripts.min.js"></script>
        <script>
            if (location.host.indexOf(":12345") >= 0) {
                // It's my local developing server port.
                document.write(
                    '<script src="http://' + 
                    (location.host || 'localhost').split(':')[0] + 
                    ':35729/livereload.js?snipver=1"></' + 
                    'script>'
                )
            }
        </script>
    </head>
    <body>
        <div id="container">
            <header>
              <a href="http://getcomposer.org/">ホーム</a><a class="" href="/getcomposer.org_doc_jp/doc/00-intro.html">はじめに</a><a class="" href="http://getcomposer.org/download/">ダウンロード</a><a class="" href="/getcomposer.org_doc_jp/doc/">ドキュメント</a><a class="last" href="http://packagist.org/">パッケージの参照</a>
              <div class="note">
                * これはKohki Makimotoが個人的に翻訳している記事です。<a class="repo" href="https://github.com/kohkimakimoto/getcomposer.org_doc_jp">Githubリポジトリはここです。</a>
              </div>
            </header>
            <div id="main" role="main">
                <h1 id="-">ライブラリ</h1>
<p>この章は、どのようにあなたのライブラリをComposerでインストールできるようにするかお話します。</p>
<!--
This chapter will tell you how to make your library installable through Composer.
-->

<h2 id="-">全てのプロジェクトはパッケージである</h2>
<p><code>composer.json</code>をディレクトリに配置した時点で、そのディレクトリはパッケージとなります。
あなたが<code>require</code>をプロジェクトに追加する時、あなたは他のパッケージに依存したパッケージを作っています。
プロジェクトとライブラリの唯一の違いは、プロジェクトは名前のないパッケージということです。</p>
<!--
As soon as you have a `composer.json` in a directory, that directory is a
package. When you add a `require` to a project, you are making a package that
depends on other packages. The only difference between your project and
libraries is that your project is a package without a name.
-->

<p>インストール可能なパッケージを作成するために、あなたはそれに名前をつける必要があります。
そのため<code>composer.json</code>に<code>name</code>を追加してください。</p>
<!--
In order to make that package installable you need to give it a name. You do
this by adding a `name` to `composer.json`:
-->

<pre><code>{
    &quot;name&quot;: &quot;acme/hello-world&quot;,
    &quot;require&quot;: {
        &quot;monolog/monolog&quot;: &quot;1.0.*&quot;
    }
}</code></pre>
<p>この例では、プロジェクト名は<code>acme/hello-world</code>です。<code>acme</code>はベンダー名です。ベンダー名は必須です。</p>
<!--
In this case the project name is `acme/hello-world`, where `acme` is the
vendor name. Supplying a vendor name is mandatory.
-->

<blockquote>
<p><strong>注意:</strong> もしベンダー名に何をつけていいかわからない場合は、あなたのGitHubのユーザネームをつけるといいでしょう。
パッケージ名は大文字小文字を区別しないので、全て小文字で単語の区切りはダッシュで行うのが規約です。</p>
</blockquote>
<!--
> **Note:** If you don't know what to use as a vendor name, your GitHub
username is usually a good bet. While package names are case insensitive, the
convention is all lowercase and dashes for word separation.
-->

<h2 id="-">プラットフォームパッケージ</h2>
<p>Composerはプラットフォームパッケージを持っています。これはシステムにインストールされる仮想的なパッケージで、
実際にはComposerではインストールされません。
これはPHP自身やPHPのエクステンション、システムライブライリを含みます。</p>
<!--
Composer has platform packages, which are virtual packages for things that are
installed on the system but are not actually installable by Composer. This
includes PHP itself, PHP extensions and some system libraries.
-->

<ul>
<li><p><code>php</code>はユーザのPHPバージョンを表します。これには<code>&gt;=5.4.0</code>のような制約を適用できます。
  PHPの64bitバージョを要求するため、<code>php-64bit</code>のパッケージを指定出来ます。</p>
</li>
<li><p><code>ext-&lt;name&gt;</code>はPHPのエクステンションを要求します。(コアエクステンション含みます)。
バージョニングには全く一致しないことがあります。なので制約には<code>*</code>を設定するのが概ね良い方法です。
エクステンションのパッケージ名の例は<code>ext-gd</code>です。</p>
</li>
<li><p><code>lib-&lt;name&gt;</code>はPHPで使われるライブラリのバージョンを制約します。
次のものが利用できます: <code>curl</code>, <code>iconv</code>, <code>libxml</code>, <code>openssl</code>,
<code>pcre</code>, <code>uuid</code>, <code>xsl</code>.</p>
</li>
</ul>
<!--
* `php` represents the PHP version of the user, allowing you to apply
   constraints, e.g. `>=5.4.0`. To require a 64bit version of php, you can
   require the `php-64bit` package.

* `ext-<name>` allows you to require PHP extensions (includes core
  extensions). Versioning can be quite inconsistent here, so it's often
  a good idea to just set the constraint to `*`.  An example of an extension
  package name is `ext-gd`.

* `lib-<name>` allows constraints to be made on versions of libraries used by
  PHP. The following are available: `curl`, `iconv`, `libxml`, `openssl`,
  `pcre`, `uuid`, `xsl`.
-->

<p><code>composer show --platform</code>を使うと、ローカルで利用できるプラットフォームパッケージのリストを得ることができます。</p>
<!--
You can use `composer show --platform` to get a list of your locally available
platform packages.
-->

<h2 id="-">バージョンの指定</h2>
<p>いくつかの方法でパッケージのバージョンを指定する必要があります。
パッケージをPackagistで公開するときは、VCS(git, svn, hg)からバージョンを推測することができます。
この場合、バージョンを指定する必要はありませんし、指定しないことが推奨されます。
どのようにバージョンが指定されるかは、<a href="#tags">タグ</a>と<a href="#branches">ブランチ</a>を参照してください。</p>
<!--
You need to specify the package's version some way. When you publish your
package on Packagist, it is able to infer the version from the VCS (git, svn,
hg) information, so in that case you do not have to specify it, and it is
recommended not to. See [tags](#tags) and [branches](#branches) to see how
version numbers are extracted from these.
-->

<p>手動でパッケージを作っていて、本当に明示的にバージョンを指定しなければならない場合は、
<code>version</code>フィールドを追加します。</p>
<!--
If you are creating packages by hand and really have to specify it explicitly,
you can just add a `version` field:
-->

<pre><code>{
    &quot;version&quot;: &quot;1.0.0&quot;
}</code></pre>
<blockquote>
<p><strong>注意:</strong> バージョンフィールドを明示的に指定することは避けるべきです。
なぜなら、タグの値がタグ名にマッチしなければならないからです。</p>
</blockquote>
<!--
> **Note:** You should avoid specifying the version field explicitly, because
> for tags the value must match the tag name.
-->

<h3 id="tags"> タグ </h3>

<p>バージョンのように見えるタグでパッケージのバージョンが作成されます。
これは&#39;X.Y.Z&#39;または&#39;vX.Y.Z&#39;にマッチする形式で、オプションでサフィックス
<code>-patch</code>,<code>-alpha</code>,<code>-beta</code>または<code>-RC</code>がつきます。
また、サフィックスには数値をつけることもできます。</p>
<!--
For every tag that looks like a version, a package version of that tag will be
created. It should match 'X.Y.Z' or 'vX.Y.Z', with an optional suffix
of `-patch`, `-alpha`, `-beta` or `-RC`. The suffixes can also be followed by
a number.
-->

<p>以下が、有効なタグ名の例になります:</p>
<!--
Here are a few examples of valid tag names:
-->

<pre><code>1.0.0
v1.0.0
1.10.5-RC1
v4.4.4beta2
v2.0.0-alpha
v2.0.4-p1</code></pre>
<h3 id="branches">ブランチ</h3>

<p>ブランチでパッケージの開発バージョンを作成できます。
ブランチがバージョンのように見える場合、そのバージョンは<code>{branchname}-dev</code>となります。
例えば<code>2.0</code>ブランチは<code>2.0.x-dev</code>バージョンとなります。
(<code>.x</code>はそれがブランチであることを認識するために、技術的な理由で追加されます。
<code>2.0.x</code>ブランチも有効で同様に<code>2.0.x-dev</code>となります。
ブランチがバージョンのように見えない場合、<code>dev-{branchname}</code>になります。<code>master</code>は<code>dev-master</code>となります。</p>
<!--
For every branch, a package development version will be created. If the branch
name looks like a version, the version will be `{branchname}-dev`. For example
a branch `2.0` will get a version `2.0.x-dev` (the `.x` is added for technical
reasons, to make sure it is recognized as a branch, a `2.0.x` branch would also
be valid and be turned into `2.0.x-dev` as well. If the branch does not look
like a version, it will be `dev-{branchname}`. `master` results in a
`dev-master` version.
-->

<p>以下が、ブランチ名の例になります:</p>
<!--
Here are some examples of version branch names:
-->

<pre><code>1.x
1.0 (equals 1.0.x)
1.1.x</code></pre>
<blockquote>
<p><strong>注意:</strong> 開発バージョンをインストールするとき、自動で<code>source</code>からpullされます。
詳細は<a href="03-cli.html#install"><code>install</code></a>コマンドを参照してください。</p>
</blockquote>
<!--
> **Note:** When you install a development version, it will be automatically
> pulled from its `source`. See the [`install`](03-cli.md#install) command
> for more details.
-->

<h3 id="aliases">エイリアス</h3>

<p>ブランチ名にバージョンのエイリアスをつけることができます。
例えば、<code>dev-master</code>のエイリアスに<code>1.0.x-dev</code>つけることができます。
これですべてのパッケージで<code>1.0.x-dev</code>を要求することができます。</p>
<!--
It is possible to alias branch names to versions. For example, you could alias
`dev-master` to `1.0.x-dev`, which would allow you to require `1.0.x-dev` in all
the packages.
-->

<p>詳細は<a href="articles/aliases.html">エイリアス</a>を参照してください。</p>
<!--
See [Aliases](articles/aliases.md) for more information.
-->

<h2 id="lock-file">ロックファイル</h2>

<p>お望みならライブラリに<code>composer.lock</code>ファイルをコミットできます。
これはチームが常に同じ依存バージョンでテストする際の助けになります。
しかし、このロックファイルはこれに依存している他のプロジェクトにいかなる影響ももたらしません。
これはメインのプロジェクトのみに影響します。</p>
<!--
For your library you may commit the `composer.lock` file if you want to. This
can help your team to always test against the same dependency versions.
However, this lock file will not have any effect on other projects that depend
on it. It only has an effect on the main project.
-->

<p>もしロックファイルをコミットしたくなくてgitを使っている場合は、それを<code>.gitignore</code>に追加してください。</p>
<!--
If you do not want to commit the lock file and you are using git, add it to
the `.gitignore`.
-->

<h2 id="publishing-to-a-vcs">VCSに公開する</h2>

<p><code>composer.json</code>ファイルを含むvcsリポジトリ(バージョンコントロールシステム、例:git)
を持っているのならば、ライブラリはすでにcomposerでインストール可能です。
この例ではGitHubで<code>acme/hello-world</code>ライブラリを<code>github.com/username/hello-world</code>として公開するとしましょう。</p>
<!--
Once you have a vcs repository (version control system, e.g. git) containing a
`composer.json` file, your library is already composer-installable. In this
example we will publish the `acme/hello-world` library on GitHub under
`github.com/username/hello-world`.
-->

<p>それでは<code>acme/hello-world</code>パッケージのインストールをテストするため、
ローカルに新しいプロジェクトを作成しましょう。私たちはそれを<code>acme/blog</code>とよぶことにします。
このブログは<code>acme/hello-world</code>に依存し、それはさらに<code>monolog/monolog</code>に依存しています。
これは、以下の<code>composer.json</code>を含む新しい<code>blog</code>ディレクトリを作成することで成し遂げられます:</p>
<!--
Now, to test installing the `acme/hello-world` package, we create a new
project locally. We will call it `acme/blog`. This blog will depend on
`acme/hello-world`, which in turn depends on `monolog/monolog`. We can
accomplish this by creating a new `blog` directory somewhere, containing a
`composer.json`:
-->

<pre><code>{
    &quot;name&quot;: &quot;acme/blog&quot;,
    &quot;require&quot;: {
        &quot;acme/hello-world&quot;: &quot;dev-master&quot;
    }
}</code></pre>
<p>nameはこのケースでは必須ではありません。このブログをライブラリとして公開しないからです。
これは<code>composer.json</code>の説明を明確にするために追加しています。</p>
<!--
The name is not needed in this case, since we don't want to publish the blog
as a library. It is added here to clarify which `composer.json` is being
described.
-->

<p>このブログアプリに依存物<code>hello-world</code>がどこで見つけられるのか知らせる必要があります。
これはパッケージのリポジトリ指定をこのブログの<code>composer.json</code>に追加することでできます:</p>
<!--
Now we need to tell the blog app where to find the `hello-world` dependency.
We do this by adding a package repository specification to the blog's
`composer.json`:
-->

<pre><code>{
    &quot;name&quot;: &quot;acme/blog&quot;,
    &quot;repositories&quot;: [
        {
            &quot;type&quot;: &quot;vcs&quot;,
            &quot;url&quot;: &quot;https://github.com/username/hello-world&quot;
        }
    ],
    &quot;require&quot;: {
        &quot;acme/hello-world&quot;: &quot;dev-master&quot;
    }
}</code></pre>
<p>パッケージリポジトリが動作や、他にどのようなタイプが利用できるかの詳細は、
<a href="05-repositories.html">リポジトリ</a>を参照してください。</p>
<!--
For more details on how package repositories work and what other types are
available, see [Repositories](05-repositories.md).
-->

<p>これで全てです。
Composerの<code>install</code>コマンドを実行することで、
依存関係をインストールすることができます！</p>
<!--
That's all. You can now install the dependencies by running Composer's
`install` command!
-->

<p><strong>要約:</strong> <code>composer.json</code>を含むあらゆるgit/svn/hgリポジトリは
パッケージリポジトリを指定し<code>require</code>フィールドで依存物を定義することで、
プロジェクトに追加することができます。</p>
<!--
**Recap:** Any git/svn/hg repository containing a `composer.json` can be added
to your project by specifying the package repository and declaring the
dependency in the `require` field.
-->

<h2 id="publishing-to-packagist">packagistに公開する</h2>

<p>Alright, so now you can publish packages. But specifying the vcs repository
every time is cumbersome. You don&#39;t want to force all your users to do that.</p>
<p>The other thing that you may have noticed is that we did not specify a package
repository for <code>monolog/monolog</code>. How did that work? The answer is packagist.</p>
<p><a href="https://packagist.org/">Packagist</a> is the main package repository for
Composer, and it is enabled by default. Anything that is published on
packagist is available automatically through Composer. Since monolog
<a href="https://packagist.org/packages/monolog/monolog">is on packagist</a>, we can depend
on it without having to specify any additional repositories.</p>
<p>If we wanted to share <code>hello-world</code> with the world, we would publish it on
packagist as well. Doing so is really easy.</p>
<p>You simply hit the big &quot;Submit Package&quot; button and sign up. Then you submit
the URL to your VCS repository, at which point packagist will start crawling
it. Once it is done, your package will be available to anyone.</p>
<p class="prev-next">
  &larr; <a href="01-basic-usage.html">基本的な使い方</a> |  <a href="03-cli.html">コマンドラインインターフェース</a> &rarr;
</p>

<!--
&larr; [Basic usage](01-basic-usage.md) |  [Command-line interface](03-cli.md) &rarr;
-->

                 <p class="fork-and-edit">
                    誤字を見つけましたか？ 何か間違いがありますか？ <a href="https://github.com/kohkimakimoto/getcomposer.org_doc_jp">forkして編集してください</a>！
                    <!--
                    Found a typo? Something is wrong in this documentation? Just <a href="http://github.com/composer/composer/edit/master/doc/{{ file }}">fork and edit</a> it!
                    -->
                </p>
            </div>
            <footer>
                <p class="license">Composer and all content on this site are released under the <a href="https://github.com/composer/composer/blob/master/LICENSE">MIT license</a>.</p>
            </footer>
        </div>
    </body>
</html>